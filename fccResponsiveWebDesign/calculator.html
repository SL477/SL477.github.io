<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="utf-8" />
		<title>FCC - Calculator</title>
		<link rel="icon" href="../images/link477.png"/>
		<link href="../myStyle.css" rel="stylesheet"/>
		<meta content="Tom Fishwick"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.css">
  		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.js"></script>
  		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.js"></script>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	</head>
	<body>
		<style>
            #display {
                border-color: black;
                border-style: solid;
            }

            td button {
                width: 100%;
            }

            td {
                font-size: large;
            }

            table {
                margin-left: auto;
                margin-right: auto;
            }

            h1 {
                text-align: center;
            }
        </style>

		<div id="navbar"></div>
			
        <div class="container-fluid">
            <h1>Calculator</h1>
            <table class="table-bordered">
                <tbody>
                    <tr>
                        <td id="display" colspan="4">&nbsp;</td>
                    </tr>
                    <tr>
                        <td id="formula" colspan="4">&nbsp;</td>
                    </tr>
                    <tr>
                        <td colspan="2"><button id="equals" onclick="equals()">=</button></td>
                        <td colspan="2"><button id="clear" onclick="clearer()">AC</button></td>
                    </tr>
                    <tr>
                        <td><button id="seven" onclick="number(7)">7</button></td>
                        <td><button id="eight" onclick="number(8)">8</button></td>
                        <td><button id="nine" onclick="number(9)">9</button></td>
                        <td><button id="divide" onclick="operator('/')">/</button></td>
                    </tr>
                    <tr>
                        <td><button id="four" onclick="number(4)">4</button></td>
                        <td><button id="five" onclick="number(5)">5</button></td>
                        <td><button id="six" onclick="number(6)">6</button></td>
                        <td><button id="multiply" onclick="operator('*')">x</button></td>
                    </tr>
                    <tr>
                        <td><button id="one" onclick="number(1)">1</button></td>
                        <td><button id="two" onclick="number(2)">2</button></td>
                        <td><button id="three" onclick="number(3)">3</button></td>
                        <td><button id="subtract" onclick="operator('-')">-</button></td>
                    </tr>
                    <tr>
                        <td colspan="2"><button id="zero" onclick="number(0)">0</button></td>
                        <td><button id="decimal" onclick="decimal()">.</button></td>
                        <td><button id="add" onclick="operator('+')">+</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <script>
            let lastOperator = "";
            let operatorRun = 0;

            const equals = () => {
                console.log("equals");
                var txt = $("#formula").text();
                $("#display").text(eval(txt));
                operatorRun = 0;
                lastOperator = "";
                $("#formula").text("0");
            };

            const number = (num) => {
                console.log(num);
                if ($("#formula").text() == "0") {
                    $("#formula").text(num);
                }
                else {
                    $("#formula").append(num);
                }
                
                if ($("#display").text() == "0" || (lastOperator != "" && lastOperator != ".")) {
                    $("#display").text(num);
                }
                else {
                    $("#display").append(num);
                }
                if (lastOperator == ".") {
                    
                }
                else {
                    lastOperator = "";
                }
                operatorRun = 0;
            };

            const operator = (op) => {
                if (lastOperator == ".") {
                    lastOperator = "";
                }
                console.log(op);
                if ($("#formula").text() == "0") {
                    $("#formula").text($("#display").text());
                }
                
                if (op == "-" && lastOperator == "-") {
                    
                }
                else {
                    if (lastOperator == "" || (op == "-" && lastOperator != "-")) {
                        $("#formula").append(op);
                    }
                    else {
                        var txt = $("#formula").text();
                        $("#formula").text(txt.substring(0, txt.length - operatorRun) + op);
                    }
                    $("#display").text(op);
                    lastOperator = op;
                    operatorRun += 1;
                }
            };

            const decimal = () => {
                if (lastOperator == ".") {
                    
                }
                else {
                    $("#formula").append(".");
                    $("#display").append(".");
                }
                lastOperator = ".";
                operatorRun = 0;
            };

            const clearer = () => {
                console.log("clear");
                $("#formula").text("0");
                $("#display").text("0");
                lastOperator = "";
                operatorRun = 0;
            };
        </script>
        
        <!--Testing-->
        <!--<script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script>-->

		<!-- Load React. -->
  		<!-- Note: when deploying, replace "development.js" with "production.min.js". -->
  		<!--<script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
		<script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>-->
		
		<script src="https://unpkg.com/react@17/umd/react.production.min.js" crossorigin></script>
		<script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js" crossorigin></script>
		  <!--Component-->
		<script src="../navbarAbs.js"></script>
	</body>
</html>